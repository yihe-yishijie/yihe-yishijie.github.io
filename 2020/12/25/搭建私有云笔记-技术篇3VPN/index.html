<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>搭建私有云笔记-技术篇3VPN | 弈世界 | 认知世界、连通万物</title>

  
  <meta name="author" content="弈何">
  

  
  <meta name="description" content="关键词：IT，VPN，华为AR路由器，树莓派4b，pptpd

VPNVPN是通过加密通讯获得的虚拟专用网络，也称隧道技术，可以帮助我们在内网穿透后比较安全的连入服务器方的（局域）网络。
有很多硬件搭配软件都可以实现VPN。
弈何采用了华为AR路由器实现了L2tp和IPsec VPN和树莓派4b实现">
  

  
  <meta name="keywords" content="笔记">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="搭建私有云笔记-技术篇3VPN"/>

  <meta property="og:site_name" content="弈世界"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="弈世界" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">弈世界</a>
    </h1>
    <p class="site-description">认知世界、连通万物</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
        <li><a href="/categories">分类</a></li>
      
        <li><a href="/tags">标签</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>搭建私有云笔记-技术篇3VPN</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2020/12/25/搭建私有云笔记-技术篇3VPN/" rel="bookmark">
        <time class="entry-date published" datetime="2020-12-25T07:10:12.000Z">
          2020-12-25
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p><strong>关键词：<font color="#BF360C">IT，VPN，华为AR路由器，树莓派4b，pptpd</font></strong></p>
<hr>
<h2 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h2><p>VPN是通过加密通讯获得的虚拟专用网络，也称隧道技术，可以帮助我们在内网穿透后比较安全的连入服务器方的（局域）网络。</p>
<p>有很多硬件搭配软件都可以实现VPN。</p>
<p>弈何采用了华为AR路由器实现了L2tp和IPsec VPN和树莓派4b实现了pptpd VPN两种方式，树莓派也可以采用openVPN提高安全性。</p>
<hr>
<p>华为AR路由器L2tp和IPsec VPN服务器配置方案：</p>
<h4 id="1、L2tp-VPN服务器（华为路由器）"><a href="#1、L2tp-VPN服务器（华为路由器）" class="headerlink" title="1、L2tp VPN服务器（华为路由器）"></a>1、L2tp VPN服务器（华为路由器）</h4><p><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/%E5%8D%8E%E4%B8%BA%E8%B7%AF%E7%94%B1%E5%99%A8L2TP%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E7%BD%AE2020122501.png" alt="[华为路由器L2TP服务器设置2020122501.png]"></p>
<p>注意，<font color="#BF360C"><strong>网关ip最好不要和原网关（路由器）ip相同</strong></font>。而且服务器配置的网段最好不要与服务器原局域网网段相同（子网掩码255对应的ip地址相同，比如<u>192.168.1.1 子网掩码：255.255.255.0</u>和<u>192.168.1.2 子网掩码：255.255.255.0</u>是一个网段，<u>192.168.1.1：255.255.255.0</u>和<u>192.168.1.2 子：255.255.0.0</u>则不是一个网段，192.168.1.1 255.255.255.0是属于192.168.1.0网段，而192.168.1.2 255.255.0.0是属于192.168.0.0网段。）</p>
<p>设置了L2tp VPN后要开通相应的账号才能够连入<br><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/%E5%8D%8E%E4%B8%BA%E8%B7%AF%E7%94%B1%E5%99%A8VPN%E8%B4%A6%E5%8F%B7%E8%AE%BE%E7%BD%AE2020122501.png" alt="[华为路由器VPN账号设置2020122501.png]"></p>
<hr>
<h4 id="2、VPN客户端"><a href="#2、VPN客户端" class="headerlink" title="2、VPN客户端"></a>2、VPN客户端</h4><p>安装环境：<br>硬件，电脑<br>操作系统，windows7，window10</p>
<p>windows自带VPN客户端和服务器工具，可以直接利用之：</p>
<p><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/VPN%E5%AE%A2%E6%88%B7%E7%AB%AF2020122501.png" alt="[VPN客户端2020122501.png]"><br><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/VPN%E5%AE%A2%E6%88%B7%E7%AB%AF2020122502.png" alt="[VPN客户端202122506.png]"><br><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/VPN%E5%AE%A2%E6%88%B7%E7%AB%AF2020122503.png" alt="[VPN客户端2020122503.png]"><br><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/VPN%E5%AE%A2%E6%88%B7%E7%AB%AF2020122504.png" alt="[VPN客户端2020122504.png]"><br><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/VPN%E5%AE%A2%E6%88%B7%E7%AB%AF2020122505.png" alt="[VPN客户端2020122505.png]"><br><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/VPN%E5%AE%A2%E6%88%B7%E7%AB%AF2020122506.png" alt="[VPN客户端2020122506.png]"><br><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/VPN%E5%AE%A2%E6%88%B7%E7%AB%AF2020122507.png" alt="[VPN客户端2020122507.png]"><br>注意安全设置<br><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/VPN%E5%AE%A2%E6%88%B7%E7%AB%AF2020122508.png" alt="[VPN客户端安全设置2020122508.png]"></p>
<p><font color="#BF360C"><strong>配置客户端坑：windows7 VPN 错误800，或windows10出现，L2TP因为安全层在初始化与远程计算机的协商时遇到了一个处理错误</strong></font><br>常见原因：<br>由于配置异常造成的无法连接，虽然用户没有做过任何的配置修改，但由于系统内部的故障会导致配置（注册表信息）出现异常，这是Windows系统中常见的问题</p>
<p>华为ar路由器解决办法：修改Windows注册表，不使用数字证书认证功能。<br>单击“开始 &gt; 运行”，输入regedit打开注册表，找到路径在左侧注册表项目中逐级找到：HKEY_LOCAL_MACHINE/System/CurrentControlSet/Services/Rasman/Parameters，单击Parameters参数，接着在右边窗口空白处单击鼠标右键，选择［新建/双字节值］并新建一个注册表值（名称为ProhibitIPSec，值为1），重启</p>
<hr>
<h4 id="3、IPsecVPN（华为路由器）"><a href="#3、IPsecVPN（华为路由器）" class="headerlink" title="3、IPsecVPN（华为路由器）"></a>3、IPsecVPN（华为路由器）</h4><p>ACL（访问控制列表）配置<br><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/%E5%8D%8E%E4%B8%BA%E8%B7%AF%E7%94%B1%E5%99%A8ACL2020122801.png" alt="[华为路由器ACL2020122801.png]"></p>
<p>IPsec VPN配置<br><img src="/2020/12/25/%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BA%91%E7%AC%94%E8%AE%B0-%E6%8A%80%E6%9C%AF%E7%AF%873VPN/%E5%8D%8E%E4%B8%BA%E8%B7%AF%E7%94%B1%E5%99%A8IPsecVPN2020122901.png" alt="[华为路由器IPsecVPN2020122901.png]"></p>
<hr>
<p>其他还有：树莓派安装openVPN服务器等实现VPN技术</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/IT/">IT</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/IT/">IT</a><a href="/tags/VPN/">VPN</a><a href="/tags/华为AR路由器/">华为AR路由器</a><a href="/tags/树莓派4b/">树莓派4b</a><a href="/tags/pptpd/">pptpd</a>
    </span>
    

    </div>

    
  </div>
</article>

  






    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2021 弈何
    
  </p>
</footer>
    
    
<script>
    var _hmt = _hmt || [];
    ( function () {
        var hm = document.createElement( "script" );
        hm.src = "https://hm.baidu.com/hm.js?dangeryond";
        var s = document.getElementsByTagName( "script" )[ 0 ];
        s.parentNode.insertBefore( hm, s );
    } )();
</script>

  </div>
</div>
</body>
</html>